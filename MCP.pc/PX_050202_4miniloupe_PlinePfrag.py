"""
$head P2CHIA10.GAPEXT0.COMBINED_SA.GENSUB.bsv.gff.GEMLINE_OUT.tsv.NEWBC.all_lib.headed.BE2_FRAGNUM.Fragnum_PlinePgem
chr3R:6104253-6104881(0);chr3R:26137613-26138208(1)|SHG0021N-10000-100000001-AAACACCAGAAACCCGBX21N-NS500460-FA-1-0	FLY	fragnumF2-chrnum1	chr3R:6104253-26138208	20033955	2	2	628,595	1,1	20032732,0
chr3R:8397997-8398656(0);chr3R:9204446-9205246(1)|SHG0021N-10000-100000013-AAACACCAGAAGCTCGBX21N-NS500460-FA-1-0	FLY	fragnumF2-chrnum1	chr3R:8397997-9205246	807249	2	22	659,800	2,20	805790,0
chr2L:6104487-6105062(0);chr2L:16268417-16269037(1)|SHG0021N-10000-100000017-AAACACCAGAATATGCBX21N-NS500460-FA-1-0	FLY	fragnumF2-chrnum1	chr2L:6104487-16269037	10164550	2	4	575,620	1,3	10163355,0
chr3R:629952-630508(0);chr3R:17438465-17439071(1)|SHG0021N-10000-100000022-AAACACCAGACAATACBX21N-NS500460-FA-1-0	FLY	fragnumF2-chrnum1	chr3R:629952-17439071	16809119	2	3	556,606	2,1	16807957,0
chr2R:6760601-6761447(0);chr2R:6953856-6954652(1)|SHG0021N-10000-100000042-AAACACCAGAGAGGCGBX21N-NS500460-FA-1-0	FLY	fragnumF2-chrnum1	chr2R:6760601-6954652	194051	2	27	846,796	9,18	192409,0
chr2L:5189877-5190650(0);chr2L:12473851-12474432(1)|SHG0021N-10000-100000050-AAACACCAGAGCTATABX21N-NS500460-FA-1-0	FLY	fragnumF2-chrnum1	chr2L:5189877-12474432	7284555	2	10	773,581	9,1	7283201,0
chr2L:2060859-2061590(0);chr2L:6231837-6232481(1);chr2L:17681421-17682166(2)|SHG0021N-10000-100000057-AAACACCAGAGGTTATBX21N-NS500460-FA-1-0	FLY	fragnumF3-chrnum1	chr2L:2060859-17682166	15621307	3	11	731,644,7454,2,5	4170247,11448940,0
"""

import os,sys
#IN="P2CHIA10.GAPEXT0.COMBINED_SA.GENSUB.bsv.gff.GEMLINE_OUT.tsv.NEWBC.all_lib.headed.BE2_FRAGNUM.Fragnum_PlinePgem"
IN=sys.argv[1]
FIN=open(IN,"r")
FOUT=open(IN+".PlinePfrag","w")
while True:
	line=FIN.readline()
	if not line:
		break
	word=line.rstrip("\n").split("|")
	FRAGS=word[0].split(";")
	GEMLINE=word[1].split("\t")
	GEMID=GEMLINE[0]
	FRAGNUM=int(GEMLINE[5])
	##print line
	for i in range(FRAGNUM):
		###print i,FRAGS[i]
		C=FRAGS[i].split(":")[0]
		S=FRAGS[i].split(":")[1].split("-")[0]
		E=FRAGS[i].split(":")[1].split("-")[1].split("(")[0]
		newline="\t".join([C,S,E,GEMID,str(FRAGNUM),str(i)])
		##print newline
		FOUT.write(newline+"\n")
